(this["webpackJsonpreact-starter"]=this["webpackJsonpreact-starter"]||[]).push([[0],{64:function(e,t,n){e.exports=n(78)},69:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n.n(a),c=n(61),l=n.n(c),o=(n(69),n(30)),u=n(46),s=n(42),i=n(25),p=n(34),g=n.n(p);function m(){var e=Object(s.a)(["\n  # mutation postMessage($grape:String!, $content:String!) {\n  #   postMessage(grape: $grape, content: $content)\n  # }\n  mutation postMessage($grape: String!, $content: String!) {\n    postMessage(grape: $grape, content: $content) {\n      grape\n      content\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=Object(s.a)(["\n  query {\n    messages {\n      grape\n      content\n    }\n  }\n"]);return v=function(){return e},e}function b(){var e=Object(s.a)(["\n  query {\n    grapes {\n      name\n    }\n  }\n"]);return b=function(){return e},e}var f=new i.ApolloClient({uri:"https://grape-vine-chat.herokuapp.com/",cache:new i.InMemoryCache}),h=(Object(i.gql)(b()),Object(i.gql)(v())),E=Object(i.gql)(m()),d=function(e){var t=e.user,n=Object(a.useRef)(null),c=Object(i.useQuery)(h).data;Object(a.useEffect)((function(){n.current.scrollIntoView({behavior:"smooth"})}));var l=c?c.messages:[];return r.a.createElement("div",{id:"messages"},l.length>0&&l.map((function(e,n){return r.a.createElement("div",{key:n,className:e.grape===t?"this-user":""},r.a.createElement("h5",null,e.grape),r.a.createElement("p",null,e.content))})),r.a.createElement("div",{ref:n}))},j=function(){var e=Object(a.useState)({grape:g()("local-user")?g()("local-user"):"",content:""}),t=Object(u.a)(e,2),n=t[0],c=t[1];console.log(n.grape);var l=Object(i.useMutation)(E),s=Object(u.a)(l,1)[0];return r.a.createElement("div",null,r.a.createElement(d,{user:n.grape}),r.a.createElement("div",{id:"chat-inputs"},r.a.createElement("input",{type:"text",value:n.grape,placeholder:"your name?",onChange:function(e){var t;(t=e.target.value).length>0&&(console.log(t),g()("local-user",t),c(Object(o.a)(Object(o.a)({},n),{},{grape:g()("local-user")})))}}),r.a.createElement("input",{type:"text",value:n.content,placeholder:"Message (press enter to send)",onChange:function(e){return c(Object(o.a)(Object(o.a)({},n),{},{content:e.target.value}))},onKeyUp:function(e){"Enter"===e.key&&(n.content.length>0&&s({variables:n}),c(Object(o.a)(Object(o.a)({},n),{},{content:""})))}})))},O=function(){return r.a.createElement(i.ApolloProvider,{client:f},r.a.createElement(j,null))};function y(){return r.a.createElement("div",{id:"app"},r.a.createElement("main",null,r.a.createElement("section",null,r.a.createElement("h3",null,"Grapes in the vine:"),r.a.createElement(O,null))))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"));t.default=y}},[[64,1,2]]]);
//# sourceMappingURL=main.b4fd8c8a.chunk.js.map